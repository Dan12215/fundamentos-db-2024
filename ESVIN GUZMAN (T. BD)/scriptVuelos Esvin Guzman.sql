-- MySQL Script generated by MySQL Workbench
-- Wed Apr  3 10:14:06 2024
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema SISTEMA_AEROPUERTO
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema SISTEMA_AEROPUERTO
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `SISTEMA_AEROPUERTO` DEFAULT CHARACTER SET utf8 ;
USE `SISTEMA_AEROPUERTO` ;

-- -----------------------------------------------------
-- Table `SISTEMA_AEROPUERTO`.`PROGRAMA_VUELO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SISTEMA_AEROPUERTO`.`PROGRAMA_VUELO` (
  `NUMERO_VUELO` INT NOT NULL,
  `DIAS_VUELO` VARCHAR(45) NOT NULL,
  `LUGAR_DESPEGUE` VARCHAR(40) NOT NULL,
  `LUGAR_LLEGADA` VARCHAR(45) NOT NULL,
  `AEROPUERTO_CODIGO` INT NOT NULL,
  PRIMARY KEY (`NUMERO_VUELO`, `AEROPUERTO_CODIGO`),
  INDEX `fk_PROGRAMA_VUELO_AEROPUERTO1_idx` (`AEROPUERTO_CODIGO` ASC) VISIBLE,
  CONSTRAINT `fk_PROGRAMA_VUELO_AEROPUERTO1`
    FOREIGN KEY (`AEROPUERTO_CODIGO`)
    REFERENCES `SISTEMA_AEROPUERTO`.`AEROPUERTO` (`CODIGO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SISTEMA_AEROPUERTO`.`VUELO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SISTEMA_AEROPUERTO`.`VUELO` (
  `idVUELO` INT NOT NULL,
  `FECHA` DATE NOT NULL,
  `PLAZAS_VACIAS` INT NOT NULL,
  `MODELO_AVION` VARCHAR(45) NOT NULL,
  `PROGRAMA_VUELO_NUMERO_VUELO` INT NOT NULL,
  `PROGRAMA_VUELO_AEROPUERTO_CODIGO` INT NOT NULL,
  `AVION_ID_AVION` INT NOT NULL,
  PRIMARY KEY (`idVUELO`, `PROGRAMA_VUELO_NUMERO_VUELO`, `PROGRAMA_VUELO_AEROPUERTO_CODIGO`, `AVION_ID_AVION`),
  INDEX `fk_VUELO_PROGRAMA_VUELO1_idx` (`PROGRAMA_VUELO_NUMERO_VUELO` ASC, `PROGRAMA_VUELO_AEROPUERTO_CODIGO` ASC) VISIBLE,
  CONSTRAINT `fk_VUELO_PROGRAMA_VUELO1`
    FOREIGN KEY (`PROGRAMA_VUELO_NUMERO_VUELO` , `PROGRAMA_VUELO_AEROPUERTO_CODIGO`)
    REFERENCES `SISTEMA_AEROPUERTO`.`PROGRAMA_VUELO` (`NUMERO_VUELO` , `AEROPUERTO_CODIGO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SISTEMA_AEROPUERTO`.`AEROPUERTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SISTEMA_AEROPUERTO`.`AEROPUERTO` (
  `CODIGO` INT NOT NULL,
  `NOMBRE` VARCHAR(45) NOT NULL,
  `PAIS` VARCHAR(45) NOT NULL,
  `CIUDAD` VARCHAR(45) NOT NULL,
  `ATERRIZAJES` INT NOT NULL,
  `DESPEGUES` INT NOT NULL,
  `VUELO_idVUELO` INT NOT NULL,
  `VUELO_PROGRAMA_VUELO_NUMERO_VUELO` INT NOT NULL,
  `VUELO_PROGRAMA_VUELO_AEROPUERTO_CODIGO` INT NOT NULL,
  `VUELO_AVION_ID_AVION` INT NOT NULL,
  PRIMARY KEY (`CODIGO`, `VUELO_idVUELO`, `VUELO_PROGRAMA_VUELO_NUMERO_VUELO`, `VUELO_PROGRAMA_VUELO_AEROPUERTO_CODIGO`, `VUELO_AVION_ID_AVION`),
  INDEX `fk_AEROPUERTO_VUELO1_idx` (`VUELO_idVUELO` ASC, `VUELO_PROGRAMA_VUELO_NUMERO_VUELO` ASC, `VUELO_PROGRAMA_VUELO_AEROPUERTO_CODIGO` ASC, `VUELO_AVION_ID_AVION` ASC) VISIBLE,
  CONSTRAINT `fk_AEROPUERTO_VUELO1`
    FOREIGN KEY (`VUELO_idVUELO` , `VUELO_PROGRAMA_VUELO_NUMERO_VUELO` , `VUELO_PROGRAMA_VUELO_AEROPUERTO_CODIGO` , `VUELO_AVION_ID_AVION`)
    REFERENCES `SISTEMA_AEROPUERTO`.`VUELO` (`idVUELO` , `PROGRAMA_VUELO_NUMERO_VUELO` , `PROGRAMA_VUELO_AEROPUERTO_CODIGO` , `AVION_ID_AVION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SISTEMA_AEROPUERTO`.`AEROLINEA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SISTEMA_AEROPUERTO`.`AEROLINEA` (
  `NOMBRE` VARCHAR(40) NOT NULL,
  `CONTACTO` VARCHAR(45) NOT NULL,
  `LUGAR_OPERACION` VARCHAR(45) NOT NULL,
  `ANIO_INICIO_LABORES` INT NOT NULL,
  `CALIFICACION_SERVICIO` FLOAT NOT NULL,
  `ESTADO` ENUM('ACTIVO', 'SUSPENDIDO', 'CANCELADO') NOT NULL,
  `PROGRAMA_VUELO_NUMERO_VUELO` INT NOT NULL,
  `PROGRAMA_VUELO_AEROPUERTO_CODIGO` INT NOT NULL,
  PRIMARY KEY (`NOMBRE`, `PROGRAMA_VUELO_NUMERO_VUELO`, `PROGRAMA_VUELO_AEROPUERTO_CODIGO`),
  INDEX `fk_AEROLINEA_PROGRAMA_VUELO1_idx` (`PROGRAMA_VUELO_NUMERO_VUELO` ASC, `PROGRAMA_VUELO_AEROPUERTO_CODIGO` ASC) VISIBLE,
  CONSTRAINT `fk_AEROLINEA_PROGRAMA_VUELO1`
    FOREIGN KEY (`PROGRAMA_VUELO_NUMERO_VUELO` , `PROGRAMA_VUELO_AEROPUERTO_CODIGO`)
    REFERENCES `SISTEMA_AEROPUERTO`.`PROGRAMA_VUELO` (`NUMERO_VUELO` , `AEROPUERTO_CODIGO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SISTEMA_AEROPUERTO`.`AVION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SISTEMA_AEROPUERTO`.`AVION` (
  `ID_AVION` INT NOT NULL,
  `MODELO` VARCHAR(45) NOT NULL,
  `CAPACIDAD` INT NOT NULL,
  PRIMARY KEY (`ID_AVION`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SISTEMA_AEROPUERTO`.`TRIPULACION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SISTEMA_AEROPUERTO`.`TRIPULACION` (
  `idTRIPULACION` INT NOT NULL,
  `NOMBR_EPILOTO` VARCHAR(45) NOT NULL,
  `NOMBRE_CO_PILOTO` VARCHAR(45) NOT NULL,
  `NOMBRE_AZAFATA1` VARCHAR(45) NOT NULL,
  `NOMBRE_AZAFATA2` VARCHAR(45) NOT NULL,
  `PROGRAMA_VUELO_NUMERO_VUELO` INT NOT NULL,
  PRIMARY KEY (`idTRIPULACION`, `PROGRAMA_VUELO_NUMERO_VUELO`),
  INDEX `fk_TRIPULACION_PROGRAMA_VUELO_idx` (`PROGRAMA_VUELO_NUMERO_VUELO` ASC) VISIBLE,
  CONSTRAINT `fk_TRIPULACION_PROGRAMA_VUELO`
    FOREIGN KEY (`PROGRAMA_VUELO_NUMERO_VUELO`)
    REFERENCES `SISTEMA_AEROPUERTO`.`PROGRAMA_VUELO` (`NUMERO_VUELO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SISTEMA_AEROPUERTO`.`ESCALA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SISTEMA_AEROPUERTO`.`ESCALA` (
  `idESCALA` INT NOT NULL,
  `N_ESCALA` INT NOT NULL,
  `SUBEN` VARCHAR(45) NOT NULL,
  `BAJAN` VARCHAR(45) NOT NULL,
  `PROGRAMA_VUELO_NUMERO_VUELO` INT NOT NULL,
  `PROGRAMA_VUELO_AEROPUERTO_CODIGO` INT NOT NULL,
  PRIMARY KEY (`idESCALA`, `PROGRAMA_VUELO_NUMERO_VUELO`, `PROGRAMA_VUELO_AEROPUERTO_CODIGO`),
  INDEX `fk_ESCALA_PROGRAMA_VUELO1_idx` (`PROGRAMA_VUELO_NUMERO_VUELO` ASC, `PROGRAMA_VUELO_AEROPUERTO_CODIGO` ASC) VISIBLE,
  CONSTRAINT `fk_ESCALA_PROGRAMA_VUELO1`
    FOREIGN KEY (`PROGRAMA_VUELO_NUMERO_VUELO` , `PROGRAMA_VUELO_AEROPUERTO_CODIGO`)
    REFERENCES `SISTEMA_AEROPUERTO`.`PROGRAMA_VUELO` (`NUMERO_VUELO` , `AEROPUERTO_CODIGO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SISTEMA_AEROPUERTO`.`AVION_has_AEROPUERTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SISTEMA_AEROPUERTO`.`AVION_has_AEROPUERTO` (
  `AVION_ID_AVION` INT NOT NULL,
  `AEROPUERTO_CODIGO` INT NOT NULL,
  `AEROPUERTO_VUELO_idVUELO` INT NOT NULL,
  `AEROPUERTO_VUELO_PROGRAMA_VUELO_NUMERO_VUELO` INT NOT NULL,
  `AEROPUERTO_VUELO_PROGRAMA_VUELO_AEROPUERTO_CODIGO` INT NOT NULL,
  `AEROPUERTO_VUELO_AVION_ID_AVION` INT NOT NULL,
  PRIMARY KEY (`AVION_ID_AVION`, `AEROPUERTO_CODIGO`, `AEROPUERTO_VUELO_idVUELO`, `AEROPUERTO_VUELO_PROGRAMA_VUELO_NUMERO_VUELO`, `AEROPUERTO_VUELO_PROGRAMA_VUELO_AEROPUERTO_CODIGO`, `AEROPUERTO_VUELO_AVION_ID_AVION`),
  INDEX `fk_AVION_has_AEROPUERTO_AEROPUERTO1_idx` (`AEROPUERTO_CODIGO` ASC, `AEROPUERTO_VUELO_idVUELO` ASC, `AEROPUERTO_VUELO_PROGRAMA_VUELO_NUMERO_VUELO` ASC, `AEROPUERTO_VUELO_PROGRAMA_VUELO_AEROPUERTO_CODIGO` ASC, `AEROPUERTO_VUELO_AVION_ID_AVION` ASC) VISIBLE,
  INDEX `fk_AVION_has_AEROPUERTO_AVION1_idx` (`AVION_ID_AVION` ASC) VISIBLE,
  CONSTRAINT `fk_AVION_has_AEROPUERTO_AVION1`
    FOREIGN KEY (`AVION_ID_AVION`)
    REFERENCES `SISTEMA_AEROPUERTO`.`AVION` (`ID_AVION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_AVION_has_AEROPUERTO_AEROPUERTO1`
    FOREIGN KEY (`AEROPUERTO_CODIGO` , `AEROPUERTO_VUELO_idVUELO` , `AEROPUERTO_VUELO_PROGRAMA_VUELO_NUMERO_VUELO` , `AEROPUERTO_VUELO_PROGRAMA_VUELO_AEROPUERTO_CODIGO` , `AEROPUERTO_VUELO_AVION_ID_AVION`)
    REFERENCES `SISTEMA_AEROPUERTO`.`AEROPUERTO` (`CODIGO` , `VUELO_idVUELO` , `VUELO_PROGRAMA_VUELO_NUMERO_VUELO` , `VUELO_PROGRAMA_VUELO_AEROPUERTO_CODIGO` , `VUELO_AVION_ID_AVION`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
INSERT INTO programa_vuelo (NUMERO_VUELO, DIAS_VUELO, LUGAR_DESPEGUE, LUGAR_LLEGADA, AEROPUERTO_CODIGO) VALUES
('533', 'MIERCOLES Y JUEVES', 'ESPAÃ‘A', 'GUATEMALA', '443'), ('532', 'MIERCOLES Y VIERNES ', 'GUATEMALA', 'MARRUECOS', '442'), ('531', 'JUEVES Y VIERNES', 'MARRUECOS', 'GUATEMALA', '441'); 

INSERT INTO aerolinea (NOMBRE, CONTACTO, LUGAR_OPERACION, ANIO_INICIO_LABORES, CALIFICACION_SERVICIO, ESTADO,PROGRAMA_VUELO_NUMERO_VUELO, PROGRAMA_VUELO_AEROPUERTO_CODIGO ) VALUES
('MAC FLY',        '502-11111111', 'CIUDAD-GUATEMALA'       ,'2022-01-01', '4.5' ,'1','545', '225'), 
('PEREZ AIRLINES', '052-11111112', 'CIUDAD-MEXICO'          ,'2020-01-01', '3.9' ,'3','544', '224'), 
('CUYO VOLADOR',   '051-11111113', 'LIMA-PERU'              ,'2023-01-01', '4.2' ,'1','543', '223'), 
('GOLD AIRLINES',  '054-11111114', 'BUENOS AIRES-ARGENTINA' ,'2021-01-01', '3'   ,'2','542', '222'), 
('QUETZAL',        '502-11111115', 'CIUDAD-GUATEMALA'       ,'2022-01-01', '5'   ,'3','541','221');

INSERT INTO aeropuerto (CODIGO,NOMBRE,PAIS,CIUDAD,ATERRIZAJES,DESPEGUES,VUELO_idVUELO,VUELO_PROGRAMA_VUELO_NUMERO_VUELO,VUELO_PROGRAMA_VUELO_AEROPUERTO_CODIGO,VUELO_AVION_ID_AVION) VALUES
(221, 'Aeropuerto La Aurora',                        'Guatemala',    'Guatemala City',   '100','110',  '541', '541', '221', '1'),
(222, 'Aeropuerto Internacional Ministro Pistarini', 'Argentina',    'Buenos Aires',     '90', '95',   '542', '542', '222', '2'),
(223, 'Aeropuerto Internacional Jorge ChÃ¡vez',       'PerÃº',         'Lima',             '80', '85',   '543', '543', '223', '3'),
(224, 'Aeropuerto Internacional Benito JuÃ¡rez',      'Mexico',       'Ciudad de MÃ©xico', '70', '75',   '544', '544', '224', '4'),
(225, 'Aeropuerto de Granada-JaÃ©n',                  'EspaÃ±a',       'Granada',          '60', '65',   '545', '545', '225', '5');

INSERT INTO AVION (ID_AVION, MODELO, CAPACIDAD) VALUES
('1', 'Boeing 737',   '150'),
('2', 'Airbus A320',  '180'),
('3', 'Boeing 777',   '300'),
('4', 'Airbus A380',  '500'),
('5', 'Embraer E190', '100');


INSERT INTO VUELO (idVUELO, FECHA, PLAZAS_VACIAS, MODELO_AVION, PROGRAMA_VUELO_NUMERO_VUELO, PROGRAMA_VUELO_AEROPUERTO_CODIGO, AVION_ID_AVION) VALUES
('11', '2024-04-05', '100', 'Boeing 737',   '533', '443', '1'),
('12', '2024-04-06', '120', 'Airbus A320',  '533', '443', '2'),
('13', '2024-04-05', '200', 'Boeing 777',   '532', '442', '3'),
('14', '2024-04-06', '250', 'Airbus A380',  '532', '442', '4'),
('15', '2024-04-06', '80',  'Embraer E190', '531', '441', '5');


INSERT INTO TRIPULACION (idTRIPULACION, NOMBR_EPILOTO, NOMBRE_CO_PILOTO, NOMBRE_AZAFATA1, NOMBRE_AZAFATA2, PROGRAMA_VUELO_NUMERO_VUELO) VALUES
('11', 'Juan Perez',         'Maria Lopez',      'Ana Martinez',  'Pedro Rodriguez','533'),
('12', 'Luis Garcia',        'Laura Fernandez',  'Elena Sanchez', 'Carlos Gomez',   '532'),
('13', 'Andres Ramirez',     'Sofia Diaz',       'Jessica Perez', 'Roberto Torres', '531'),
('14', 'Carolina PÃ©rez',     'Javier FernÃ¡ndez', 'MarÃ­a GarcÃ­a',  'Daniel LÃ³pez',   '534'),
('15', 'Gabriela HernÃ¡ndez', 'RaÃºl DÃ­az',        'LucÃ­a Torres',  'Alejandro Ruiz', '535');

INSERT INTO ESCALA (idESCALA, N_ESCALA, SUBEN, BAJAN, PROGRAMA_VUELO_NUMERO_VUELO, PROGRAMA_VUELO_AEROPUERTO_CODIGO) VALUES
('31', '1', 'Pasajeros', 'Pasajeros', '533', '443'),
('32', '2', 'Pasajeros', 'Pasajeros', '532', '442'),
('33', '3', 'Pasajeros', 'Pasajeros', '531', '441'),
('34', '4', 'Pasajeros', 'Pasajeros', '533', '443'),
('35', '5', 'Pasajeros', 'Pasajeros', '532', '442');


/* CONSULTAS*/
/*1. Todas las columnas de la de programa de vuelos*/
SELECT * FROM PROGRAMA_VUELO;

/*2. Columna nombre de las aerolÃ­neas que su paÃ­s sea EspaÃ±a.*/
SELECT NOMBRE FROM AEROLINEA WHERE LUGAR_OPERACION = 'ESPAÃ‘A';
/*3. Columna cÃ³digo de los aeropuertos que su paÃ­s sea MÃ©xico*/
SELECT CODIGO FROM AEROPUERTO WHERE PAIS = 'MEXICO';
/*4. Columna modelo de los aviones que su capacidad sea igual o superior a 500*/
SELECT MODELO FROM AVION WHERE CAPACIDAD >= 500;
/*5. Columna modelo de los aviones que su capacidad sea menor a 250*/
SELECT MODELO FROM AVION WHERE CAPACIDAD < 250;
/*6. Todas las columnas de las escalas de los vuelos que tengan paso por Guatemala*/
SELECT * FROM ESCALA WHERE PROGRAMA_VUELO_AEROPUERTO_CODIGO = (SELECT CODIGO FROM AEROPUERTO WHERE CIUDAD = 'GUATEMALA');
/*8. Todas las columnas de la tabla de tripulaciÃ³n donde el nombre de los pilotos contengaÂ laÂ silabaÂ 'ar'*/
SELECT * FROM TRIPULACION WHERE NOMBR_EPILOTO LIKE '%ar%';








