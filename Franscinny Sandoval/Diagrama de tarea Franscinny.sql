-- MySQL Script generated by MySQL Workbench
-- Wed Apr  3 16:34:21 2024
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema AEROPUERTO
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema AEROPUERTO
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `AEROPUERTO` DEFAULT CHARACTER SET utf8 ;
USE `AEROPUERTO` ;

-- -----------------------------------------------------
-- Table `AEROPUERTO`.`AEROPUERTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `AEROPUERTO`.`AEROPUERTO` (
  `id_aeropuerto` VARCHAR(10) NOT NULL,
  `nombre` VARCHAR(45) NOT NULL,
  `pais` VARCHAR(45) NOT NULL,
  `ciudad` VARCHAR(45) NOT NULL,
  `numero_vuelo` INT NOT NULL,
  `accidentes` INT NOT NULL,
  PRIMARY KEY (`id_aeropuerto`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `AEROPUERTO`.`TRIPULACION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `AEROPUERTO`.`TRIPULACION` (
  `id_tripulacion` VARCHAR(10) NOT NULL,
  `nombre_piloto` VARCHAR(45) NOT NULL,
  `nombre_copiloto` VARCHAR(45) NOT NULL,
  `nombre_azafata1` VARCHAR(45) NOT NULL,
  `nombre_azafata2` VARCHAR(45) NOT NULL,
  `nombre_azafata3` VARCHAR(45) NULL,
  PRIMARY KEY (`id_tripulacion`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `AEROPUERTO`.`PROGRAMA_VUELO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `AEROPUERTO`.`PROGRAMA_VUELO` (
  `id_programa_vuelo` VARCHAR(10) NOT NULL,
  `numero_vuelo` INT NOT NULL,
  `linea_aerea` VARCHAR(45) NOT NULL,
  `fecha_vuelo` DATE NOT NULL,
  `AEROPUERTO_id_aeropuerto` VARCHAR(10) NOT NULL,
  `TRIPULACION_id_tripulacion` VARCHAR(10) NOT NULL,
  PRIMARY KEY (`id_programa_vuelo`, `AEROPUERTO_id_aeropuerto`, `TRIPULACION_id_tripulacion`),
  INDEX `fk_PROGRAMA_VUELO_AEROPUERTO1_idx` (`AEROPUERTO_id_aeropuerto` ASC) VISIBLE,
  INDEX `fk_PROGRAMA_VUELO_TRIPULACION1_idx` (`TRIPULACION_id_tripulacion` ASC) VISIBLE,
  CONSTRAINT `fk_PROGRAMA_VUELO_AEROPUERTO1`
    FOREIGN KEY (`AEROPUERTO_id_aeropuerto`)
    REFERENCES `AEROPUERTO`.`AEROPUERTO` (`id_aeropuerto`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_PROGRAMA_VUELO_TRIPULACION1`
    FOREIGN KEY (`TRIPULACION_id_tripulacion`)
    REFERENCES `AEROPUERTO`.`TRIPULACION` (`id_tripulacion`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `AEROPUERTO`.`AEROLINEA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `AEROPUERTO`.`AEROLINEA` (
  `id_aerolinea` INT NOT NULL,
  `contacto` VARCHAR(45) NOT NULL,
  `lugar_operacion` VARCHAR(45) NOT NULL,
  `anio_inicio_labores` DATE NOT NULL,
  `estado` ENUM('FUNCIOANDO', 'SUSPENDIDA', 'CANCELADA') NOT NULL,
  `calificaion_servicio` FLOAT NOT NULL,
  `PROGRAMA_VUELO_id_programa_vuelo` VARCHAR(10) NOT NULL,
  `PROGRAMA_VUELO_AEROPUERTO_id_aeropuerto` VARCHAR(10) NOT NULL,
  `PROGRAMA_VUELO_TRIPULACION_id_tripulacion` VARCHAR(10) NOT NULL,
  PRIMARY KEY (`id_aerolinea`, `PROGRAMA_VUELO_id_programa_vuelo`, `PROGRAMA_VUELO_AEROPUERTO_id_aeropuerto`, `PROGRAMA_VUELO_TRIPULACION_id_tripulacion`),
  INDEX `fk_AEROLINEA_PROGRAMA_VUELO1_idx` (`PROGRAMA_VUELO_id_programa_vuelo` ASC, `PROGRAMA_VUELO_AEROPUERTO_id_aeropuerto` ASC, `PROGRAMA_VUELO_TRIPULACION_id_tripulacion` ASC) VISIBLE,
  CONSTRAINT `fk_AEROLINEA_PROGRAMA_VUELO1`
    FOREIGN KEY (`PROGRAMA_VUELO_id_programa_vuelo` , `PROGRAMA_VUELO_AEROPUERTO_id_aeropuerto` , `PROGRAMA_VUELO_TRIPULACION_id_tripulacion`)
    REFERENCES `AEROPUERTO`.`PROGRAMA_VUELO` (`id_programa_vuelo` , `AEROPUERTO_id_aeropuerto` , `TRIPULACION_id_tripulacion`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `AEROPUERTO`.`VUELO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `AEROPUERTO`.`VUELO` (
  `id_vuelo` VARCHAR(10) NOT NULL,
  `fecha` DATE NOT NULL,
  `plazas_vacias` INT NOT NULL,
  `modelo_avion` VARCHAR(45) NOT NULL,
  `PROGRAMA_VUELO_NUMERO_VUELO` VARCHAR(10) NOT NULL,
  `PROGRAMA_VUELO_AEROPUERTO_CODIGO` VARCHAR(10) NOT NULL,
  PRIMARY KEY (`id_vuelo`, `PROGRAMA_VUELO_NUMERO_VUELO`, `PROGRAMA_VUELO_AEROPUERTO_CODIGO`),
  INDEX `fk_VUELO_PROGRAMA_VUELO1_idx` (`PROGRAMA_VUELO_NUMERO_VUELO` ASC, `PROGRAMA_VUELO_AEROPUERTO_CODIGO` ASC) VISIBLE,
  CONSTRAINT `fk_VUELO_PROGRAMA_VUELO1`
    FOREIGN KEY (`PROGRAMA_VUELO_NUMERO_VUELO`)
    REFERENCES `AEROPUERTO`.`PROGRAMA_VUELO` (`numero_vuelo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
) ENGINE = InnoDB;



-- -----------------------------------------------------
-- Table `AEROPUERTO`.`AVION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `AEROPUERTO`.`AVION` (
  `id_avion` VARCHAR(10) NOT NULL,
  `modelo` VARCHAR(45) NOT NULL,
  `capacidad` INT NOT NULL,
  `VUELO_id_vuelo` VARCHAR(10) NOT NULL,
  `VUELO_PROGRAMA_VUELO_NUMERO_VUELO` INT NOT NULL,
  `VUELO_PROGRAMA_VUELO_AEROPUERTO_CODIGO` INT NOT NULL,
  PRIMARY KEY (`id_avion`, `VUELO_id_vuelo`, `VUELO_PROGRAMA_VUELO_NUMERO_VUELO`, `VUELO_PROGRAMA_VUELO_AEROPUERTO_CODIGO`),
  INDEX `fk_AVION_VUELO1_idx` (`VUELO_id_vuelo` ASC, `VUELO_PROGRAMA_VUELO_NUMERO_VUELO` ASC, `VUELO_PROGRAMA_VUELO_AEROPUERTO_CODIGO` ASC) VISIBLE,
  CONSTRAINT `fk_AVION_VUELO1`
    FOREIGN KEY (`VUELO_id_vuelo` , `VUELO_PROGRAMA_VUELO_NUMERO_VUELO` , `VUELO_PROGRAMA_VUELO_AEROPUERTO_CODIGO`)
    REFERENCES `AEROPUERTO`.`VUELO` (`id_vuelo` , `PROGRAMA_VUELO_NUMERO_VUELO` , `PROGRAMA_VUELO_AEROPUERTO_CODIGO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `AEROPUERTO`.`AVION_has_AEROPUERTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `AEROPUERTO`.`AVION_has_AEROPUERTO` (
  `id_avion` VARCHAR(10) NOT NULL,
  `id_aeropuerto` VARCHAR(10) NOT NULL,
  PRIMARY KEY (`id_avion`, `id_aeropuerto`),
  INDEX `fk_AVION_has_AEROPUERTO_AEROPUERTO1_idx` (`id_aeropuerto` ASC) VISIBLE,
  INDEX `fk_AVION_has_AEROPUERTO_AVION1_idx` (`id_avion` ASC) VISIBLE,
  CONSTRAINT `fk_AVION_has_AEROPUERTO_AVION1`
    FOREIGN KEY (`id_avion`)
    REFERENCES `AEROPUERTO`.`AVION` (`id_avion`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_AVION_has_AEROPUERTO_AEROPUERTO1`
    FOREIGN KEY (`id_aeropuerto`)
    REFERENCES `AEROPUERTO`.`AEROPUERTO` (`id_aeropuerto`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `AEROPUERTO`.`ESCALA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `AEROPUERTO`.`ESCALA` (
  `id_escala` VARCHAR(10) NOT NULL,
  `numero_escala` INT NOT NULL,
  `aterrizaje` VARCHAR(45) NOT NULL,
  `despegue` VARCHAR(45) NOT NULL,
  `VUELO_idVUELO` INT NOT NULL,
  `VUELO_PROGRAMA_VUELO_NUMERO_VUELO` INT NOT NULL,
  `VUELO_PROGRAMA_VUELO_AEROPUERTO_CODIGO` INT NOT NULL,
  `VUELO_AVION_ID_AVION` INT NOT NULL,
  PRIMARY KEY (`id_escala`, `VUELO_idVUELO`, `VUELO_PROGRAMA_VUELO_NUMERO_VUELO`, `VUELO_PROGRAMA_VUELO_AEROPUERTO_CODIGO`, `VUELO_AVION_ID_AVION`),
  INDEX `fk_ESCALA_VUELO1_idx` (`VUELO_idVUELO` ASC, `VUELO_PROGRAMA_VUELO_NUMERO_VUELO` ASC, `VUELO_PROGRAMA_VUELO_AEROPUERTO_CODIGO` ASC, `VUELO_AVION_ID_AVION` ASC) VISIBLE,
  CONSTRAINT `fk_ESCALA_VUELO1`
    FOREIGN KEY (`VUELO_idVUELO` , `VUELO_PROGRAMA_VUELO_NUMERO_VUELO` , `VUELO_PROGRAMA_VUELO_AEROPUERTO_CODIGO`)
    REFERENCES `AEROPUERTO`.`VUELO` (`id_vuelo` , `PROGRAMA_VUELO_NUMERO_VUELO` , `PROGRAMA_VUELO_AEROPUERTO_CODIGO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- Insertar datos en la tabla AEROPUERTO
INSERT INTO AEROPUERTO (id_aeropuerto, nombre, pais, ciudad, numero_vuelo, accidentes)
VALUES 
('A001', 'Aeropuerto Internacional de Madrid', 'España', 'Madrid', 1001, 0),
('A002', 'Aeropuerto Internacional de Barcelona', 'España', 'Barcelona', 1002, 1),
('A003', 'Aeropuerto Internacional de Cancún', 'México', 'Cancún', 2001, 2),
('A004', 'Aeropuerto Internacional Benito Juárez', 'México', 'Ciudad de México', 2002, 0),
('A005', 'Aeropuerto Internacional de Tijuana', 'México', 'Tijuana', 2003, 1);

-- Insertar datos en la tabla TRIPULACION
INSERT INTO TRIPULACION (id_tripulacion, nombre_piloto, nombre_copiloto, nombre_azafata1, nombre_azafata2, nombre_azafata3)
VALUES 
('T001', 'Juan García', 'Pedro Martínez', 'María López', 'Ana Rodríguez', 'Laura Pérez'),
('T002', 'Luis González', 'Andrés Fernández', 'Sofía Ramírez', 'Lucía Gómez', NULL),
('T003', 'Carlos Sánchez', 'Javier Díaz', 'Elena Martínez', 'Carmen Ruiz', 'Marta Jiménez'),
('T004', 'Manuel Pérez', 'David Ruiz', 'Isabel Gómez', 'Sara Rodríguez', NULL),
('T005', 'Jorge Hernández', 'Alberto López', 'Paula García', 'Beatriz Sánchez', NULL);

-- Insertar datos en la tabla PROGRAMA_VUELO
INSERT INTO PROGRAMA_VUELO (id_programa_vuelo, numero_vuelo, linea_aerea, fecha_vuelo, AEROPUERTO_id_aeropuerto, TRIPULACION_id_tripulacion)
VALUES 
('PV001', 1001, 'Iberia', '2024-04-10', 'A001', 'T001'),
('PV002', 1002, 'Air France', '2024-04-11', 'A002', 'T002'),
('PV003', 2001, 'Aeroméxico', '2024-04-12', 'A003', 'T003'),
('PV004', 2002, 'Volaris', '2024-04-13', 'A004', 'T004'),
('PV005', 2003, 'Interjet', '2024-04-14', 'A005', 'T005');

-- Insertar datos en la tabla AEROLINEA
INSERT INTO AEROLINEA (id_aerolinea, contacto, lugar_operacion, anio_inicio_labores, estado, calificaion_servicio, PROGRAMA_VUELO_id_programa_vuelo, PROGRAMA_VUELO_AEROPUERTO_id_aeropuerto, PROGRAMA_VUELO_TRIPULACION_id_tripulacion)
VALUES 
(1, 'info@iberia.com', 'España', '1927-06-28', 'FUNCIOANDO', 4.5, 'PV001', 'A001', 'T001'),
(2, 'contacto@airfrance.com', 'Francia', '1933-10-07', 'FUNCIOANDO', 4.2, 'PV002', 'A002', 'T002'),
(3, 'contacto@aeromexico.com', 'México', '1934-09-15', 'FUNCIOANDO', 4.0, 'PV003', 'A003', 'T003'),
(4, 'contacto@volaris.com', 'México', '2005-03-13', 'FUNCIOANDO', 4.1, 'PV004', 'A004', 'T004'),
(5, 'contacto@interjet.com', 'México', '2005-12-05', 'FUNCIOANDO', 4.3, 'PV005', 'A005', 'T005');


-- Insertar datos en la tabla VUELO
INSERT INTO VUELO (id_vuelo, fecha, plazas_vacias, modelo_avion, PROGRAMA_VUELO_NUMERO_VUELO, PROGRAMA_VUELO_AEROPUERTO_CODIGO)
VALUES 
('V001', '2024-04-10', 200, 'Airbus A320', 1001, 'A001'),
('V002', '2024-04-11', 180, 'Boeing 737', 1002, 'A002'),
('V003', '2024-04-12', 220, 'Airbus A330', 2001, 'A003'),
('V004', '2024-04-13', 150, 'Airbus A320', 2002, 'A004'),
('V005', '2024-04-14', 190, 'Airbus A321', 2003, 'A005');

-- Insertar datos en la tabla AVION
INSERT INTO AVION (id_avion, modelo, capacidad, VUELO_id_vuelo, VUELO_PROGRAMA_VUELO_NUMERO_VUELO, VUELO_PROGRAMA_VUELO_AEROPUERTO_CODIGO)
VALUES 
('AV001', 'Airbus A320', 180, 'V001', 1001, 'A001'),
('AV002', 'Boeing 737', 160, 'V002', 1002, 'A002'),
('AV003', 'Airbus A330', 220, 'V003', 2001, 'A003'),
('AV004', 'Airbus A320', 150, 'V004', 2002, 'A004'),
('AV005', 'Airbus A321', 200, 'V005', 2003, 'A005');

-- Insertar datos en la tabla AVION_has_AEROPUERTO
INSERT INTO AVION_has_AEROPUERTO (id_avion, id_aeropuerto)
VALUES 
('AV001', 'A001'),
('AV002', 'A002'),
('AV003', 'A003'),
('AV004', 'A004'),
('AV005', 'A005');

-- Insertar datos en la tabla ESCALA
INSERT INTO ESCALA (id_escala, numero_escala, aterrizaje, despegue, VUELO_idVUELO, VUELO_PROGRAMA_VUELO_NUMERO_VUELO, VUELO_PROGRAMA_VUELO_AEROPUERTO_CODIGO, VUELO_AVION_ID_AVION)
VALUES 
('E001', 1, '2024-04-10 12:00:00', '2024-04-10 13:00:00', 'V001', 1001, 'A001', 'AV001'),
('E002', 2, '2024-04-11 14:00:00', '2024-04-11 15:00:00', 'V002', 1002, 'A002', 'AV002'),
('E003', 1, '2024-04-12 12:00:00', '2024-04-12 13:00:00', 'V003', 2001, 'A003', 'AV003'),
('E004', 2, '2024-04-13 14:00:00', '2024-04-13 15:00:00', 'V004', 2002, 'A004', 'AV004'),
('E005', 1, '2024-04-14 12:00:00', '2024-04-14 13:00:00', 'V005', 2003, 'A005', 'AV005');
